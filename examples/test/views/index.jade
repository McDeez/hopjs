extends layout

block head
	script(src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js")
	script(src=Hop.apiURL);
	script(src="http://ajaxorg.github.com/ace/build/src/ace.js")
	script
		$(document).ready(function(){
			editor = ace.edit("editor");
			editor.getSession().setMode("ace/mode/javascript");
			console._log=console.log;
			console.log=function(){
				console._log(arguments);
				var out = Array.prototype.slice.call(arguments,0);
				var str="";
				out.map(function(arg){
					if(typeof arg == "object")
						str+=JSON.stringify(arg);
					else 
						str+=arg.toString();
				});

				$("#log").append(str+"\n");
			}
		});
		runCode=function(){
			try {
				var code = editor.getSession().getValue();
				eval(code);
			} catch(e){
				console.error(e);
				console.error(e.stack);
				console.error(e.line,e.lineNumber);
			}
		}
block content
	a(href=Hop.docURL) Documentation about the API
	p	
		| You an also use the API you've defined in your own JavaScript applications! 
		| Simply open the JavaScript console in your browser and type:
	div
		pre#editor(style="width:80%;height:400px;clear:both;display:block;position:relative;")
			| //First lets create a user
			| UserService.create({ name: "user", password:"password", email:"email@email.com" },function(err,user){
			|		UserService.authenticate(user,function(err,user){
			|			console.log("Authenticated:"user);
			|	  });
			| });
		button(onclick="runCode()") Run
		pre#log(style="width:80%;height:200px;background:black;clear:both;display:block;position:relative;border:solid 2px;border-color: grey;color:grey;overflow:scroll")
